## Préface

- Exécution du install.sh fournit dans les ressources pour installer docker
- Exécution de `sudo docker run hello-world` :
![[Pasted image 20230509103101.png | center]]

---
## Exercice 1

On run la commande make dans le dossier hello qui va compiler le hello.c et le copier dans tous les dossier que l'on utilisera après pour faire nos dockerfile.

Ensuite on fait le dockerfile suivant :
```c
FROM ubuntu:22.04
WORKDIR /
COPY hello.exe .
CMD ["./hello.exe"]
```

Après build et compilation on obtient la sortie suivante :

![[Pasted image 20230509110039.png | center]]

---
## Exercice 2

Voici le dockerfile que j'ai fait en changeant juste le FROM :
```c
FROM alpine:3.17.3
WORKDIR /
COPY hello.exe .
CMD ["./hello.exe"]
```

A l'exécution on obtient une erreur :
![[Pasted image 20230509112450.png | center]]

---
## Exercice 3

Le problème vient du fait que sur alpine on a pas la librairie standard, on a la musl libc. Pour palier à ce problème je compile une seconde version de hello que je nommerai hello_static que je copie à la main dans le dossier hello-alpine. Celui-ci étant static fonctionne. On obtient la sortie suivante après modification du Dockerfile.

![[Pasted image 20230509113120.png | center]]

---
## Exercice 4

Pour le hello-scratch il faut également le hello_static étant donné que lui ne possède rien du tout par défaut.

Voici la sortie que l'on obtient:
![[Pasted image 20230509113512.png]]

---
## Exercice 5

On installe la commande dive à l'aide de leur [github](https://github.com/wagoodman/dive#installation)

- 13kb pour hello-world
- 78mb pour hello-ubuntu
- 7.9mb pour hello-alpine
- 900kb pour hello-scratch

La différence entre mes images et celle de hello-world:latest doit ce jouer au niveau de l'image utilisée.

---
## Exercice 6 :

Je fixe la version de node dans le makefile
`FROM node:18.14.1`

---
## Exercice 7 :

```makefile
run:
	docker run -p 8888:8080 node-app	
```

le -p nous permet de rediriger le port 8080 du container sur le port 8888 de notre ordinateur.

Après cela il ne reste plus qu'à faire un sudo make build et un sudo make run et avec ça lorsque l'on va sur localhost:8888 on obtient la page en question.

---
## Exercice 8 :

![[Pasted image 20230523081501.png | center]]
Nos modifications commencent à partir du WORKDIR /app.

Le soucis est que lors du COPY .. on prends tout le répertoire courant y compris le node_module comme on peut le voir ici avec les fichiers modifiés en jaune.

La solution est de créer un dockerignore qui ressemblerai à ceci.
